<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Brawl Nest</title>
<style>
    /* ===== Reset & Base ===== */
    * {margin:0; padding:0; box-sizing:border-box; font-family: Arial, sans-serif;}
    body {background-color: #ff7f50; color: #fff;}
    a {text-decoration:none; color: inherit;}
    button {cursor:pointer; border:none; border-radius:5px; padding:0.5em 1em; background:#fff;color:#ff7f50; font-weight:bold;}
    /* ===== Navbar ===== */
    .navbar {display:flex; justify-content:space-between; align-items:center; padding:10px 20px; background:#ff8f40; position:sticky; top:0; z-index:100;}
    .navbar .logo {display:flex; align-items:center; font-weight:bold; font-size:1.5em;}
    .navbar .logo img {width:40px; height:40px; margin-right:10px;}
    .nav-links {display:flex; gap:15px;}
    .nav-links a {padding:5px 10px; border-radius:5px; transition:0.3s;}
    .nav-links a:hover {background:rgba(255,255,255,0.2);}
    .hamburger {display:none; flex-direction:column; cursor:pointer;}
    .hamburger div {width:25px; height:3px; background:#fff; margin:4px 0;}
    /* ===== Responsive ===== */
    @media(max-width:768px){
        .nav-links {display:none; flex-direction:column; background:#ff8f40; position:absolute; top:60px; left:0; width:100%; padding:10px 0;}
        .nav-links.active {display:flex;}
        .hamburger {display:flex;}
    }
    /* ===== Sections ===== */
    section {display:none; padding:20px;}
    section.active {display:block;}
    h1,h2 {margin-bottom:10px;}
    .back-btn {margin-top:20px; display:inline-block;}
    /* ===== Cards ===== */
    .card {background:rgba(255,255,255,0.1); padding:15px; border-radius:10px; margin-bottom:15px;}
    .card h3 {margin-bottom:5px;}
    .card p {font-size:0.9em;}
    /* ===== Form ===== */
    .form-group {margin-bottom:10px;}
    input, textarea {width:100%; padding:8px; border-radius:5px; border:none;}
    /* ===== Animations ===== */
    .fade {animation:fadeIn 0.5s;}
    @keyframes fadeIn {from{opacity:0;} to{opacity:1;}}
</style>
</head>
<body>

<!-- Navbar -->
<div class="navbar">
    <div class="logo"><img src="https://cdn-icons-png.flaticon.com/512/616/616408.png" alt="oiseau">Brawl Nest</div>
    <div class="nav-links" id="navLinks">
        <a href="#" data-target="menu">Menu</a>
        <a href="#" data-target="news">News</a>
        <a href="#" data-target="events">Événements</a>
        <a href="#" data-target="admin">Admin</a>
    </div>
    <div class="hamburger" id="hamburger">
        <div></div><div></div><div></div>
    </div>
</div>

<!-- Sections -->
<section id="menu" class="active fade">
    <h1>Bienvenue sur Brawl Nest</h1>
    <p>Découvrez nos news et événements récents !</p>
</section>

<section id="news" class="fade">
    <h1>News</h1>
    <div id="newsList"></div>
    <button class="back-btn" data-target="menu">Retour</button>
</section>

<section id="events" class="fade">
    <h1>Événements</h1>
    <div id="eventsList"></div>
    <button class="back-btn" data-target="menu">Retour</button>
</section>

<section id="admin" class="fade">
    <h1>Admin</h1>
    <div id="adminPanel">
        <div class="form-group">
            <input type="password" id="adminCode" placeholder="Code Admin">
        </div>
        <button id="loginBtn">Se connecter</button>
    </div>
    <div id="adminActions" style="display:none;">
        <h2>Ajouter une news</h2>
        <div class="form-group"><input type="text" id="newsTitle" placeholder="Titre"></div>
        <div class="form-group"><textarea id="newsContent" placeholder="Contenu"></textarea></div>
        <button id="addNews">Ajouter News</button>

        <h2>Ajouter un événement</h2>
        <div class="form-group"><input type="text" id="eventTitle" placeholder="Titre"></div>
        <div class="form-group"><textarea id="eventContent" placeholder="Contenu"></textarea></div>
        <div class="form-group"><input type="number" id="eventMinutes" placeholder="Durée (minutes)"></div>
        <button id="addEvent">Ajouter Événement</button>

        <button class="back-btn" data-target="menu">Retour</button>
    </div>
</section>

<script>
/* ===== Navbar Mobile ===== */
const hamburger = document.getElementById('hamburger');
const navLinks = document.getElementById('navLinks');
hamburger.addEventListener('click',()=>{navLinks.classList.toggle('active');});

/* ===== Page Navigation ===== */
const links = document.querySelectorAll('.nav-links a');
const backBtns = document.querySelectorAll('.back-btn');
const sections = document.querySelectorAll('section');

function showSection(id){
    sections.forEach(sec => sec.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}

links.forEach(link=>{
    link.addEventListener('click', e=>{
        e.preventDefault();
        const target = link.getAttribute('data-target');
        showSection(target);
        if(navLinks.classList.contains('active')) navLinks.classList.remove('active');
    });
});
backBtns.forEach(btn=>{
    btn.addEventListener('click', ()=>{
        const target = btn.getAttribute('data-target');
        showSection(target);
    });
});

/* ===== LocalStorage Data ===== */
let news = JSON.parse(localStorage.getItem('brawlNews')||'[]');
let events = JSON.parse(localStorage.getItem('brawlEvents')||'[]');

function renderNews(){
    const newsDiv = document.getElementById('newsList');
    newsDiv.innerHTML = '';
    if(news.length===0){newsDiv.innerHTML='<p>Aucune news pour le moment.</p>'; return;}
    news.forEach((n,i)=>{
        const card = document.createElement('div');
        card.className='card';
        card.innerHTML=`<h3>${n.title}</h3><p>${n.content}</p>`;
        newsDiv.appendChild(card);
    });
}
function renderEvents(){
    const eventsDiv = document.getElementById('eventsList');
    eventsDiv.innerHTML = '';
    const now = Date.now();
    events = events.filter(e=>e.end>now);
    localStorage.setItem('brawlEvents',JSON.stringify(events));
    if(events.length===0){eventsDiv.innerHTML='<p>Aucun événement pour le moment.</p>'; return;}
    events.forEach((e,i)=>{
        const card = document.createElement('div');
        card.className='card';
        const minutesLeft = Math.ceil((e.end-now)/60000);
        card.innerHTML=`<h3>${e.title} (${minutesLeft} min restantes)</h3><p>${e.content}</p>`;
        eventsDiv.appendChild(card);
    });
}
renderNews();
renderEvents();

/* ===== Admin ===== */
const adminCode = '2005';
const loginBtn = document.getElementById('loginBtn');
const adminPanel = document.getElementById('adminPanel');
const adminActions = document.getElementById('adminActions');

loginBtn.addEventListener('click', ()=>{
    const codeInput = document.getElementById('adminCode').value;
    if(codeInput===adminCode){
        adminPanel.style.display='none';
        adminActions.style.display='block';
        alert('Connexion admin réussie !');
    } else {
        alert('Code incorrect !');
    }
});

/* ===== Add News/Event ===== */
document.getElementById('addNews').addEventListener('click',()=>{
    const title = document.getElementById('newsTitle').value.trim();
    const content = document.getElementById('newsContent').value.trim();
    if(!title||!content){alert('Remplir tous les champs'); return;}
    news.unshift({title,content});
    localStorage.setItem('brawlNews',JSON.stringify(news));
    document.getElementById('newsTitle').value='';
    document.getElementById('newsContent').value='';
    renderNews();
    alert('News ajoutée !');
});

document.getElementById('addEvent').addEventListener('click',()=>{
    const title = document.getElementById('eventTitle').value.trim();
    const content = document.getElementById('eventContent').value.trim();
    const minutes = parseInt(document.getElementById('eventMinutes').value);
    if(!title||!content||isNaN(minutes)||minutes<=0){alert('Remplir tous les champs correctement'); return;}
    const end = Date.now()+minutes*60000;
    events.unshift({title,content,end});
    localStorage.setItem('brawlEvents',JSON.stringify(events));
    document.getElementById('eventTitle').value='';
    document.getElementById('eventContent').value='';
    document.getElementById('eventMinutes').value='';
    renderEvents();
    alert('Événement ajouté !');
});

/* ===== Auto-refresh events every 30s ===== */
setInterval(renderEvents,30000);
</script>
</body>
</html>
